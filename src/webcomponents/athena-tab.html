<dom-module id="athena-tab">

<template>

    <style>
        :host .outer {
            float: left;
            position: relative;
            width: 0px;
            height: 100%;
            border: 0;
            margin: 0;
            z-index: 1;
            background : url("../svg/tab.svg");
            border-style : solid;
            border-color : #7F7F7F;
            border-color : rgba(127, 127, 127, 1);
            -webkit-user-select: none;
            transition: width 200ms;
        }
        :host([active]) .outer {
            z-index: 5;
            background : url("../svg/tab_active.svg");
        }
        .favicon {
            height: 16px;
            width: 16px;
            background-size: 16px;
            position: absolute;
            left: 9px;
            top: 5px;
            z-index: 3;
            pointer-events: none;
        }
        .title {
            color: #222222;
            margin: 5px 22px 5px 30px;
            overflow: hidden;
            text-overflow: clip;
            white-space: nowrap;
            background: -webkit-linear-gradient(left, #222222, #222222 67%, #eeeeee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .close {
            position: absolute;
            top: 7px;
            right: 7px;
            width: 14px;
            height: 14px;
            z-index: 999;
            background-image: url("../svg/close.svg");
        }
        .close:enabled {
            background-image: url("../svg/close.svg");
        }
        .close:hover {
            background-image: url("../svg/close_hover.svg");
        }
        .close:active:hover {
            background-image: url("../svg/close_active.svg");
        }
    </style>

    <div id="outer" class="outer" on-tap="_onTap">
        <div class="title">
            {{title}}
        </div>
        <div class="favicon">
            <img src="{{favicon}}">
        </div>
        <div class="close" on-tap="_onClose"/>
    </div>

</template>

<script>
    Polymer({
        is: "athena-tab",

        properties: {
            title: String,
            favicon: String,
            active: {
                type: Boolean,
                notify: true,
                reflectToAttribute: true
            },
            width: {
                type: String,
                observer: "_widthChanged"
            },
            hOffset: {
                type: Number,
                observer: "_hOffsetChanged"
            }
        },

        _onTap(event) {
            this.fire("click-tab");
        },

        _onClose(event) {
            event.stopPropagation();
            this.fire("close-tab");
        },

        _widthChanged(width) {
            if (width === "0") {
                this.$.outer.style.visibility = "hidden";
            }
            this.$.outer.style.width = width;
        },

        _hOffsetChanged(hOffset) {
            const left = (hOffset === 0) ? "" : `${hOffset}px`;
            this.$.outer.style.left = left;
        }
    });
</script>

</dom-module>